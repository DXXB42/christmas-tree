<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ„ åœ£è¯æ ‘</title>
  <style>
    :root{
      --bg1:#07121f; --bg2:#0b2a3a;
      --tree1:#0b5a32; --tree2:#0a7a3a;
      --trunk:#6b3f1d;
      --text:#eaf7ff;
      --glow: 0 0 10px rgba(255,255,255,.6), 0 0 30px rgba(255,255,255,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      background: radial-gradient(1200px 800px at 50% 30%, var(--bg2), var(--bg1));
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", Arial;
      overflow:hidden;
    }
    .wrap{
      width:min(720px, 92vw);
      text-align:center;
      padding:24px 12px 40px;
      position:relative;
      z-index:2;
    }
    h1{
      margin:0 0 6px;
      font-weight:800;
      letter-spacing:.02em;
      text-shadow: var(--glow);
    }
    .sub{
      opacity:.9;
      margin:0 0 16px;
      font-size:14px;
    }

    /* Tree */
    .scene{
      position:relative;
      width:100%;
      height:520px;
      display:flex;
      justify-content:center;
      align-items:flex-end;
      padding-bottom:10px;
    }

    .tree{
      position:relative;
      width:280px;
      height:420px;
      filter: drop-shadow(0 18px 30px rgba(0,0,0,.35));
    }
    .layer{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      width:0;height:0;
      border-left:140px solid transparent;
      border-right:140px solid transparent;
      border-bottom:170px solid var(--tree2);
      border-radius:12px;
    }
    .layer:nth-child(1){ top:70px; border-bottom-color:var(--tree2); }
    .layer:nth-child(2){
      top:150px;
      border-left-width:155px;
      border-right-width:155px;
      border-bottom-width:190px;
      border-bottom-color:var(--tree1);
    }
    .layer:nth-child(3){
      top:240px;
      border-left-width:175px;
      border-right-width:175px;
      border-bottom-width:210px;
      border-bottom-color:var(--tree2);
    }

    .trunk{
      position:absolute;
      bottom:-6px;
      left:50%;
      transform:translateX(-50%);
      width:70px;
      height:90px;
      background: linear-gradient(#7a4a23, var(--trunk));
      border-radius:10px;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.07);
    }

    /* Star */
    .star{
      position:absolute;
      top:18px;
      left:50%;
      transform:translateX(-50%) rotate(0deg);
      width:52px;height:52px;
      filter: drop-shadow(0 0 14px rgba(255,220,90,.85));
      animation: spin 8s linear infinite;
    }
    .star:before{
      content:"";
      position:absolute;
      inset:0;
      background: conic-gradient(from 0deg, #ffeaa6, #ffd25a, #fff3c9, #ffd25a, #ffeaa6);
      clip-path: polygon(
        50% 0%, 61% 35%, 98% 35%, 68% 57%,
        79% 91%, 50% 70%, 21% 91%, 32% 57%,
        2% 35%, 39% 35%
      );
      border-radius:10px;
    }
    @keyframes spin{ to{ transform:translateX(-50%) rotate(360deg);} }

    /* Garlands */
    .garland{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      width:260px;
      height:70px;
      border-bottom: 3px solid rgba(255,255,255,.18);
      border-radius: 0 0 220px 220px;
      top:145px;
    }
    .garland.g2{ width:300px; top:230px; opacity:.9; }
    .garland.g3{ width:340px; top:320px; opacity:.85; }

    /* Lights */
    .bulb{
      position:absolute;
      width:10px;height:10px;
      border-radius:50%;
      box-shadow: 0 0 8px currentColor, 0 0 18px color-mix(in srgb, currentColor 50%, transparent);
      animation: blink 1.6s infinite;
    }
    @keyframes blink{
      0%,100%{ transform:scale(1); opacity:1;}
      50%{ transform:scale(.65); opacity:.45;}
    }

    /* Ornaments */
    .orn{
      position:absolute;
      width:14px;height:14px;
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.9), rgba(255,255,255,0) 35%),
                  radial-gradient(circle at 60% 65%, rgba(0,0,0,.25), rgba(0,0,0,0) 50%);
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.12), 0 8px 16px rgba(0,0,0,.18);
    }

    /* Snow */
    .snow{
      position:fixed;
      inset:-10vh 0 0 0;
      pointer-events:none;
      z-index:1;
    }
    .flake{
      position:absolute;
      top:-10vh;
      width:6px;height:6px;
      border-radius:50%;
      background: rgba(255,255,255,.85);
      box-shadow: 0 0 10px rgba(255,255,255,.35);
      animation: fall linear infinite;
    }
    @keyframes fall{
      to{ transform: translate(var(--dx), 120vh); }
    }

    /* Controls */
    .btns{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:14px;
    }
    button{
      border:0;
      padding:10px 12px;
      border-radius:12px;
      background: rgba(255,255,255,.10);
      color:var(--text);
      cursor:pointer;
      backdrop-filter: blur(10px);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.12);
      transition:.15s transform ease, .15s background ease;
    }
    button:hover{ transform:translateY(-1px); background: rgba(255,255,255,.14); }
    button:active{ transform:translateY(0px) scale(.98); }

    .note{
      margin-top:12px;
      font-size:12px;
      opacity:.85;
    }
    .credit{
      margin-top:6px;
      font-size:12px;
      opacity:.7;
    }
    a{ color:#b9f3ff; }
  </style>
</head>
<body>
  <div class="snow" id="snow"></div>

  <div class="wrap">
    <h1>ğŸ„ Merry Christmas</h1>
    <p class="sub">ç‚¹å‡»æŒ‰é’®åˆ‡æ¢ç¯å…‰æ¨¡å¼ / ç‚¹å‡»æ ‘ä¹Ÿå¯ä»¥åˆ‡æ¢ âœ¨</p>

    <div class="scene">
      <div class="tree" id="tree" aria-label="Christmas Tree">
        <div class="star"></div>

        <div class="layer"></div>
        <div class="layer"></div>
        <div class="layer"></div>

        <div class="garland"></div>
        <div class="garland g2"></div>
        <div class="garland g3"></div>

        <div class="trunk"></div>
      </div>
    </div>

    <div class="btns">
      <button id="modeBtn">åˆ‡æ¢ç¯å…‰æ¨¡å¼</button>
      <button id="snowBtn">åˆ‡æ¢é£˜é›ª</button>
      <button id="shotBtn">ç”Ÿæˆåˆ†äº«æˆªå›¾æç¤º</button>
    </div>

    <div class="note">æŠŠè¿™ä¸ªé¡µé¢çš„é“¾æ¥å‘ç»™æœ‹å‹ï¼Œä»–ä»¬æ‰“å¼€å°±èƒ½çœ‹åˆ°ä½ çš„åœ£è¯æ ‘ ğŸ</div>
    <div class="credit">Tipsï¼šæ‰‹æœºä¸Šå¯ç”¨ç³»ç»Ÿâ€œåˆ†äº«â†’æ‹·è´é“¾æ¥â€ã€‚</div>
  </div>

<script>
  const tree = document.getElementById('tree');
  const snowWrap = document.getElementById('snow');
  const modeBtn = document.getElementById('modeBtn');
  const snowBtn = document.getElementById('snowBtn');
  const shotBtn = document.getElementById('shotBtn');

  const modes = [
    // mode 0: classic
    ['#ff4d4d','#ffd24d','#4dff88','#4db3ff','#b84dff'],
    // mode 1: warm
    ['#ffb86b','#ffd56b','#fff0b3','#ff7aa2','#ffa86b'],
    // mode 2: icy
    ['#a6f6ff','#6be4ff','#b3c7ff','#a6b0ff','#ffffff'],
  ];
  let mode = 0;

  function rand(min, max){ return Math.random()*(max-min)+min; }

  function clearDecor(){
    tree.querySelectorAll('.bulb,.orn').forEach(el=>el.remove());
  }

  function addBulbsAndOrns(){
    const colors = modes[mode];

    // Bulbs roughly along 3 garlands
    const garlandY = [150, 235, 325];
    const counts = [14, 16, 18];

    garlandY.forEach((y, i)=>{
      const n = counts[i];
      for(let k=0;k<n;k++){
        const b = document.createElement('div');
        b.className = 'bulb';
        const c = colors[k % colors.length];
        b.style.color = c;
        b.style.background = c;

        // distribute across tree width
        const x = 50 + (k-(n-1)/2) * (180/n) + rand(-6,6);
        b.style.left = `calc(50% + ${x-50}px)`;
        b.style.top = `${y + rand(-6,6)}px`;
        b.style.animationDuration = `${rand(1.1, 2.2)}s`;
        b.style.animationDelay = `${rand(0, 1.2)}s`;

        tree.appendChild(b);
      }
    });

    // Ornaments random on tree body
    for(let i=0;i<22;i++){
      const o = document.createElement('div');
      o.className = 'orn';
      const c = colors[Math.floor(Math.random()*colors.length)];
      o.style.background += `, radial-gradient(circle at 70% 70%, ${c}, rgba(0,0,0,0) 55%)`;

      const top = rand(115, 360);
      // width envelope grows with y
      const spread = (top-90) * 0.8;
      const left = rand(-spread/2, spread/2);
      o.style.left = `calc(50% + ${left}px)`;
      o.style.top = `${top}px`;
      o.style.transform = `scale(${rand(.85, 1.25)})`;

      tree.appendChild(o);
    }
  }

  function nextMode(){
    mode = (mode + 1) % modes.length;
    clearDecor();
    addBulbsAndOrns();
  }

  // Snow
  let snowOn = true;
  let flakes = [];
  function makeSnow(count=80){
    snowWrap.innerHTML = '';
    flakes = [];
    for(let i=0;i<count;i++){
      const f = document.createElement('div');
      f.className = 'flake';
      const x = rand(0, 100);
      const size = rand(2, 6);
      const dur = rand(6, 14);
      const delay = rand(0, 8);
      const dx = `${rand(-40, 40)}vw`;

      f.style.left = `${x}vw`;
      f.style.width = `${size}px`;
      f.style.height = `${size}px`;
      f.style.opacity = rand(.35, .95);
      f.style.animationDuration = `${dur}s`;
      f.style.animationDelay = `-${delay}s`;
      f.style.setProperty('--dx', dx);

      snowWrap.appendChild(f);
      flakes.push(f);
    }
  }

  function toggleSnow(){
    snowOn = !snowOn;
    snowWrap.style.display = snowOn ? 'block' : 'none';
  }

  // Share hint
  function shareHint(){
    const text = `åˆ†äº«å°æŠ€å·§ï¼š
1ï¼‰ç”µè„‘ï¼šæ‰“å¼€é¡µé¢ â†’ å¤åˆ¶åœ°å€æ é“¾æ¥å‘ç»™æœ‹å‹
2ï¼‰æ‰‹æœºï¼šæµè§ˆå™¨â€œåˆ†äº«â€â†’â€œæ‹·è´é“¾æ¥â€
ï¼ˆæˆªå›¾ä¹Ÿå¾ˆæœ‰èŠ‚æ—¥æ°”æ°›ğŸ„ï¼‰`;
    alert(text);
  }

  // init
  addBulbsAndOrns();
  makeSnow(90);

  modeBtn.addEventListener('click', nextMode);
  tree.addEventListener('click', nextMode);
  snowBtn.addEventListener('click', toggleSnow);
  shotBtn.addEventListener('click', shareHint);
</script>
</body>
</html>
